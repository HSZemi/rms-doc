<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>1. Language Reference - Age of Empires II Random Map Script Reference</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link href="../github.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "1. Language Reference";
    var mkdocs_page_input_path = "1_language_reference.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Age of Empires II Random Map Script Reference</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">0. Introduction</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">1. Language Reference</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#11-scheme-of-a-rms">1.1. Scheme of a RMS</a></li>
    

    <li class="toctree-l2"><a href="#12-command-descriptions">1.2. Command Descriptions</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#121-player_setup">1.2.1. &lt;PLAYER_SETUP&gt;</a></li>
        
            <li><a class="toctree-l3" href="#122-land_generation">1.2.2. &lt;LAND_GENERATION&gt;</a></li>
        
            <li><a class="toctree-l3" href="#123-elevation_generation">1.2.3. &lt;ELEVATION_GENERATION&gt;</a></li>
        
            <li><a class="toctree-l3" href="#124-cliff_generation">1.2.4. &lt;CLIFF_GENERATION&gt;</a></li>
        
            <li><a class="toctree-l3" href="#125-terrain_generation">1.2.5. &lt;TERRAIN_GENERATION&gt;</a></li>
        
            <li><a class="toctree-l3" href="#126-connection_generation">1.2.6. &lt;CONNECTION_GENERATION&gt;</a></li>
        
            <li><a class="toctree-l3" href="#127-objects_generation">1.2.7. &lt;OBJECTS_GENERATION&gt;</a></li>
        
            <li><a class="toctree-l3" href="#128-map-sizes">1.2.8. Map Sizes</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#13-general-syntax">1.3 General Syntax</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#131-comments">1.3.1. Comments</a></li>
        
            <li><a class="toctree-l3" href="#132-conditionals">1.3.2. Conditionals</a></li>
        
            <li><a class="toctree-l3" href="#133-random-code">1.3.3. Random Code</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#14-item-constants">1.4. Item Constants</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../2_terrains_and_objects/">2. Terrains & Objects</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../3_testing/">3. Testing</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../4_example_script/">4. Example Script</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../5_links_and_resources/">5. Links and Resources</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Age of Empires II Random Map Script Reference</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>1. Language Reference</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Scripts are divided in 7 sections, each one managing a category of map features. Sections start with the following tags:</p>
<pre><code class="rms">&lt;PLAYER_SETUP&gt;                  /* Basic setup */
&lt;LAND_GENERATION&gt;               /* Main lands or seas */
&lt;ELEVATION_GENERATION&gt;          /* Hills */
&lt;CLIFF_GENERATION&gt;              /* Rocky cliffs */
&lt;TERRAIN_GENERATION&gt;            /* Terrain patches */
&lt;CONNECTION_GENERATION&gt;         /* Terrain bridges/roads/passages */
&lt;OBJECTS_GENERATION&gt;            /* Units, buildings, resources, eye-candies */
</code></pre>

<ul>
<li>You don't need to write sections in that order, however that's the order the game uses them.</li>
<li>You might notice that in the standard maps they are in a different order with cliffs and connections (and sometimes elevation) at the end. However, it might be helpful to write them in the order above, because it makes it easier for you to visualize the map generation process and understand why things will happen; like terrain water on hills, objects on connections, or terrain avoiding cliffs. Ultimately the order in which you write the sections has no effect though. </li>
<li>Not all the sections are necessary (e.g. you may make a map without cliffs).</li>
<li>Each section contains some types of instructions. Most instructions look like this:</li>
</ul>
<pre><code class="rms">create_something WHAT
{
attribute TYPE
attribute N
set_attribute
(...)
}
</code></pre>

<ul>
<li>You can indent instructions however you want, just keep words separated by newlines or spaces.</li>
<li>Scripts are case-sensitive, pay attention to capital letters.</li>
<li>All "create" commands can be used multiple times in a RMS. Other commands can't.</li>
<li>Most "attributes" (subcommands inside brackets) have a default and can be omitted. Some { } can be empty!</li>
<li>Order of attributes inside brackets is not important.</li>
<li>If an item can't be created for some reason, the game will simply ignore it and go on. If you see something is missing, try to relax some constraints on its placement.</li>
</ul>
<h2 id="11-scheme-of-a-rms">1.1. Scheme of a RMS</h2>
<p>Here's the skeleton of a script with all possible commands, useful for cutting &amp; pasting. Everything is explained later.</p>
<ul>
<li><code>N</code> means an integer number, possibly within a range. Decimals and negatives are usually not allowed.</li>
<li><code>%</code> means a percentage (0-100). Decimals are not allowed. Do not type the "%"!</li>
<li>TYPE means a constant identifier such as GRASS. Types are reported in Terrains &amp; Objects chapter.
Nothing happens if you use a non-valid name (a type that doesn't exist).</li>
<li>Commands work in all versions of the game unless specifically stated otherwise in the descriptions below.</li>
<li>/ means that you should use either one or the other of these attributes, but not both.</li>
</ul>
<pre><code class="rms">&lt;PLAYER_SETUP&gt;
random_placement  /  grouped_by_team
nomad_resources
ai_info_map_type TYPE N(0-1) N(0-1) N(0-1)

&lt;LAND_GENERATION&gt;

base_terrain TYPE

create_player_lands
{ 
terrain_type TYPE
land_percent %  /  number_of_tiles N
base_size N  
base_elevation N(1-7) 
left_border %,  right_border %,  top_border %,  bottom_border %
border_fuzziness %
clumping_factor %
zone N  /  set_zone_randomly  /  set_zone_by_team  
other_zone_avoidance_distance N
}

create_land
{
terrain_type  TYPE
land_percent %  /  number_of_tiles N
base_size N
base_elevation N(1-7)
left_border %,  right_border %,  top_border %,  bottom_border %
land_position % %
border_fuzziness %
clumping_factor %
zone N  /  set_zone_randomly 
other_zone_avoidance_distance N
min_placement_distance N
land_id N
assign_to_player N(1-8)
}

&lt;ELEVATION_GENERATION&gt;

create_elevation  N(1-7)
{
base_terrain TYPE
number_of_tiles N
number_of_clumps N
set_scale_by_size
set_scale_by_groups
spacing N 
}

&lt;CLIFF_GENERATION&gt;

min_number_of_cliffs N
max_number_of_cliffs N
min_length_of_cliff N
max_length_of_cliff N
cliff_curliness %
min_distance_cliffs N
min_terrain_distance N 

&lt;TERRAIN_GENERATION&gt;

create_terrain TYPE
{
base_terrain TYPE
land_percent %  /  number_of_tiles N
number_of_clumps N
set_scale_by_size
set_scale_by_groups
spacing_to_other_terrain_types N
set_avoid_player_start_areas
height_limits N(0-7) N(0-7)
set_flat_terrain_only
clumping_factor %
}

&lt;CONNECTION_GENERATION&gt;

create_connect_all_players_land  /  create_connect_teams_lands  /  
create_connect_all_lands  /  create_connect_same_land_zones
{
    default_terrain_replacement  TYPE 
replace_terrain     TYPE    TYPE
terrain_cost    TYPE    N(1-15)
terrain_size        TYPE    N N
}

&lt;OBJECTS_GENERATION&gt;

create_object TYPE
{
number_of_objects N
number_of_groups N
group_variance N
set_scaling_to_map_size  /  set_scaling_to_player_number
set_place_for_every_player
set_gaia_object_only
terrain_to_place_on TYPE
min_distance_to_players N,  max_distance_to_players N
max_distance_to_other_zones N
min_distance_group_placement N
temp_min_distance_group_placement N
group_placement_radius N
set_tight_grouping  /  set_loose_grouping
place_on_specific_land_id N
resource_delta N
}
</code></pre>

<h2 id="12-command-descriptions">1.2. Command Descriptions</h2>
<h3 id="121-player_setup">1.2.1. &lt;PLAYER_SETUP&gt;</h3>
<p>default is <code>random_placement</code></p>
<h4 id="commands">Commands</h4>
<p><code>random_placement</code><br />
Players are positioned in circle/oval around the map. Even if you don’t type it, it still applies because it is the default.</p>
<p><code>grouped_by_team</code><br />
Position team members in close proximity on the map. This command and random_placement are mutually exclusive. The base_size specified in create_player_lands determines the distance between players on a team. Requires UP/HD.</p>
<p><code>nomad_resources</code><br />
Modify starting resources to match the built-in nomad map. This means that the cost of a town center (275W, 100S) is added to the stockpile. Can be used even if your map is not a nomad map. Requires UP/HD.</p>
<p><code>ai_info_map_type TYPE  N(0-1)  N(0-1)  N(0-1)</code><br />
This is an optional line to help the AI (computer player) detect the type of map. 
Map types are reported in section 2.5.
The N values are for map styles. 1 is used if the style applies, 0 if it does not apply. They require UP/HD.</p>
<ul>
<li>The 1st number is 1 if nomad, else 0</li>
<li>The 2nd number is 1 if michi, else 0 </li>
<li>The 3rd number is 1 if you want to display the map type in the objectives window, if not 0 </li>
<li>Nomad is any map where you start without a town center</li>
<li>Michi is a type of map where teams are completely separated from each other by forest and have to cut through.</li>
</ul>
<p>Example – a map that is similar to Arabia, but has a nomad start, and you want the objectives screen to say Arabia:
<code>ai_info_map_type ARABIA 1 0 1</code></p>
<h3 id="122-land_generation">1.2.2. &lt;LAND_GENERATION&gt;</h3>
<p>Here basic territories are created, especially player starting lands; e.g. you may place grass continents on a water base. Land origins (square bases) are placed in order. After that, all lands "grow" at the same time from their origins outwards to fill the amount of space specified for each land.</p>
<h4 id="commands_1">Commands</h4>
<p><code>base_terrain TYPE</code><br />
Initially, the map is filled with this terrain type. Default is GRASS.</p>
<p><code>create_player_lands { ... }</code><br />
Creates starting lands for ALL players. Usually there's one and only one create_player_lands statement.
- If you use create_player_lands more than once, each player will have multiple starting towns!
- Instead of create_player_lands you can use assign_to_player (see below)
- If you create no player lands at all, you can't place starting units and resources (only a Town Center and Villagers will be placed somewhere at random – not evenly spaced – so this is generally not recommended)</p>
<p><code>create_land { ... }</code><br />
Creates a generic land. It's called "land" but it can also be a lake (or any terrain type)! </p>
<h6 id="attributes">Attributes</h6>
<p><code>terrain_type TYPE</code><br />
Type of terrain... Default is GRASS.</p>
<p><code>land_percent %  /  number_of_tiles N</code><br />
Size of land. Use either land_percent or number_of_tiles. Default is 100%.
If total size of all lands exceeds the size of whole map, the game will try to reduce them fairly.</p>
<p><code>land_percent %</code>  </p>
<ul>
<li>Percent on whole map; scales with map size </li>
<li>For Player Lands, it's total size (shared among ALL players), so you better set a high %</li>
</ul>
<p><code>number_of_tiles N</code></p>
<ul>
<li>It's a fixed size</li>
<li>For Player Lands, it means the size of each player's land; about 1000 tiles should be ok.</li>
</ul>
<p><code>base_size N</code><br />
Minimum square radius of the land. Default is 3 (7x7 square). Placed sequentially, so if land bases are large and overlap, the ones placed later will be visible. This command can force land size to be bigger than that specified with <code>land_percent</code> / <code>number_of_tiles</code>. If base_size is high in comparison with land size, the land becomes square-like (or even a perfect square!). Land origins will be placed at least this far from the edge of the map.  If base_size for non-player lands  is too large, the land will fail to find a valid position and will be placed at the center of the map.</p>
<p><code>base_elevation N(1-7)</code><br />
Modify the base elevation for player and standard lands. Default is 0 (not elevated). &lt;ELEVATION_GENERATION&gt; must exist if used. Requires UP/HD. Values over 7 are possible, but there are rendering issues with terrain and objects. Setting it to -1 results in maximally elevated lands, and causes those same issues.  It is best to stay in the range 1-7. </p>
<p><code>left_border %,  right_border %,  top_border %,  bottom_border %</code><br />
Make the land stay away from map edges, at least by specified distance (defined by % of map width).
You can specify one or more of these attributes. Default is 0 (lands can touch any edge).</p>
<ul>
<li>Top border refers to the upper left edge.</li>
<li>You can use these attributes to create a land near the centre of the map, but also to create a land near a particular edge: e.g. bottom_border 90 would create a strip of land very close to top border.</li>
</ul>
<p>Using asymmetric borders for player lands can cause crashes in some cases.  To avoid this, follow these steps:</p>
<ul>
<li>Never use top_border in isolation when creating player lands.</li>
<li>Using any one of right/left/bottom along with top will prevent crashes, as long as it has at least the magnitude of the top_border.</li>
</ul>
<p>Negative borders can be used, with caution. If a land has it's randomly placed origin "outside" of the map, then game will crash. Therefore you should not use not use negative borders for a land unless you have specified a land_position for that land, to ensure the origin is not oustide the map.</p>
<p><code>land_position %(0-100) %(0-99)</code><br />
Defines the origin of a given land using X% and Y% coordinates. For example, <code>land_position 50 50</code> would place the land at the map center. Ignores borders and any other restrictions. Default is random. Disabled for player lands and lands with assign_to_player. Setting the second number to 100 will crash the map. If land_position specifies an origin that lies outside the area specified by <code>left_border %</code>,  <code>right_border %</code>,  <code>top_border %</code>,  <code>bottom_border %</code>, the land will only be the size of its base_size and will not grow.</p>
<p><code>border_fuzziness %</code><br />
Border regularity: lower values (5-20) tend to make land edges more ragged and natural when land growth is constrained by borders. Default is 20. Lower values allow land growth to exceed the boundaries set by top/bottom/left/right borders. At border_fuzziness 0, the land ignores borders entirely. At 100 (or any negative value), borders are not exceeded at all.</p>
<p><code>clumping_factor %(-100-99)</code><br />
Shape regularity: higher values tend to form roundish lands; lower values tend to form weird, snaky lands. Default is 8.
If you want to guarantee that a land is wide enough, you better use base_size. Negative values will create extremely patchy and snaky lands and is generally not recommended.</p>
<p><code>zone N   /  set_zone_randomly  /  set_zone_by_team</code><br />
Setting a zone is useful if combined with other_zone_avoidance_distance (see below). Zone number is just a label, its value is not important. By default, every Player Land has a different zone (as in Islands map), but non-player lands all have same zone. </p>
<ul>
<li><code>set_zone_randomly</code> assigns a random zone. In <code>create_player_lands</code> it works separately for each player, so that some players share the same zone, some others don't (as in Archipelago map)</li>
<li><code>set_zone_by_team</code> works only for Player Lands, makes allies share the same zone (as in Team Islands map)</li>
<li>zone 99 will crash the game; values greater than 99 work again though.</li>
</ul>
<p><code>other_zone_avoidance_distance N</code><br />
Minimum distance, in tiles, from lands of other zones (see above) to stop land growth. Default is 0 (lands can touch each other). Keeps isles separated. Useful also for creating rivers: even if the lands cover the whole map, with this attribute they will still be separated by strips of base terrain of constant width N.</p>
<ul>
<li>If you want to be sure that two lands are separated, BOTH land definitions must contain this attribute!</li>
<li>If you give two lands different values, the smaller avoidance distance will be the one that applies</li>
<li>When used for player lands (and lands with assign_to_player), it only applies to the distance to other player lands and NOT to non-player lands</li>
<li>This attribute only applies to land growth – land origins/bases may end up closer together or even touching if base_size is large or many players are on a small map.</li>
</ul>
<p><code>min_placement_distance N</code><br />
Specifies the minimum distance that a land's origin must be placed away from the origins of other lands. Has no effect on Player Lands. Specifiying too high of a number means that the land will find no valid position, and will be placed in the center. This attribute was previously undocumented and is basically never used.  Best to leave it out of your script.</p>
<p><code>land_id N</code><br />
Assigns a numeric label to the land (it has nothing to do with zone labels). Its value is not important.
This allows objects (see below) to be placed only on this land, using place_on_specific_land_id.</p>
<ul>
<li>Does not work with Player Lands</li>
<li>Land must be separated from others by water (or shallow / ice / beach for objects not allowed there)</li>
<li>Multiple lands can be given the same id – in this case the objects will be placed on all lands with this id</li>
</ul>
<p><code>assign_to_player N(1-8)</code><br />
To be used only in create_land, makes this land player N's starting land. An alternative to create_player_lands.
You should assign 8 different lands to 8 players, if you want your RMS to support up to 8 players. </p>
<ul>
<li>Player number refers to order, not color (player 1 is first name on list, not necessarily blue)</li>
<li>If some players are not playing, their lands won't be created at all</li>
<li>You can't assign the same land to more players</li>
<li>This attribute, along with terrain_to_place_on can be used to create unequal starts. For example, to make a computer-player-friendly single player version of a map that computer players normally have trouble with. However, you cannot control the position of individual lands that are made using this attribute - all lands belonging to players will still be in a circle or oval shape and <code>land_position</code> is ignored.</li>
</ul>
<h3 id="123-elevation_generation">1.2.3. &lt;ELEVATION_GENERATION&gt;</h3>
<p>Elevations are the smooth and walkable hills. They automatically avoid players' start areas.</p>
<h4 id="commands_2">Commands</h4>
<p><code>create_elevation N(1-7) { ... }</code><br />
Creates one or more hills with random height, up to N. Generally, hills with larger base reach greater height.</p>
<h5 id="attributes_1">Attributes</h5>
<p><code>base_terrain TYPE</code><br />
Hills grow on this type of terrain. Default is <code>GRASS</code>.</p>
<p><code>number_of_tiles N</code><br />
Total base size of ALL hills. Default is about 152 tiles.</p>
<p><code>number_of_clumps N</code><br />
Maximum number of distinct hills to create. Default is one hill.</p>
<p><code>set_scale_by_size</code><br />
Total base size is scaled to map size. Unscaled value refers to a 100x100 map.</p>
<p><code>set_scale_by_groups</code><br />
Number of hills is scaled to map size. Unscaled value refers to a 100x100 map.</p>
<p><code>Spacing N</code><br />
Specifies the spacing between each height level on each clump of elevation. Default is 1. Larger numbers produce hills with rings of flat areas on each level. This can be used to increase buildable land and prevent long sloped areas. </p>
<h3 id="124-cliff_generation">1.2.4. &lt;CLIFF_GENERATION&gt;</h3>
<p>Cliffs are the rocky, not walkable canyons. You can't create single cliffs, but you can define general cliff statistics.
All commands have a reasonable default; typing just <code>&lt;CLIFF_GENERATION&gt;</code> is enough to create cliffs.  If you don’t want your map to have cliffs, then don’t put in a <code>&lt;CLIFF_GENERATION&gt;</code> section at all.  Cliffs automatically avoid player start areas as well as the origins of non-player lands and also avoid all sources of water.</p>
<h4 id="commands_3">Commands</h4>
<p><code>min_number_of_cliffs N</code><br />
<code>max_number_of_cliffs N</code><br />
Limits of total number of cliffs on map. They don't scale with map size (so you need to manually scale with "if" statements - see conditionals).  Default is min 3 and max 8.</p>
<p><code>min_length_of_cliff N</code><br />
<code>max_length_of_cliff N</code><br />
Length limits of each cliff (each one can have different length). Default is min 5 and max 9. Usually, min must be at least 3 for individual cliffs to appear at all. Note that cliff length is not equivalent to the number of tiles the cliff occupies, because cliff objects are larger than one tile. Length 3 is 12 tiles, 4 is 15 tiles, 5 is 18 tiles and so on.  Cliffs may end up shorter than expected if restricted by other nearby cliffs.</p>
<p><code>cliff_curliness %</code><br />
Chance of turning at each cliff tile. Low % makes straighter cliffs, high % makes curlier cliffs. Default is 36.</p>
<p><code>min_distance_cliffs N</code><br />
Minimum distance between cliffs, in tiles. Default is 2.  A distance of 2 is 6 tiles between cliffs, 1 is 3 tiles, 0 is 0 tiles.</p>
<p><code>min_terrain_distance N</code><br />
Minimum distance to the nearest body of water (including ice). Does not apply to water created in <code>&lt;TERRAIN_GENERATION&gt;</code> because that is created afterwards. Default is 2. A distance of 2 is 6 tiles, 1 is 3 tiles, 0 is 0 tiles.</p>
<h3 id="125-terrain_generation">1.2.5. &lt;TERRAIN_GENERATION&gt;</h3>
<p>Here you can create a variety of terrain patches on the main lands. Sometimes you may achieve the same result by creating a Land or by creating a Terrain, but they can have different attributes. Also remember:</p>
<ul>
<li>Terrain order is important: if you want to place palm forest on desert, first you must declare desert.</li>
<li>Terrain is placed AFTER elevations, so be careful e.g. when placing water... or you may get water on hills!</li>
</ul>
<h4 id="commands_4">Commands</h4>
<p><code>create_terrain TYPE { ... }</code><br />
Creates one or more patches of TYPE terrain.</p>
<h5 id="attributes_2">Attributes</h5>
<p><code>base_terrain TYPE</code><br />
What terrain type the new terrain will be placed on. Default is GRASS.</p>
<p><code>land_percent %  /  number_of_tiles N</code><br />
Total size of terrain patches. Use either land_percent or number_of_tiles. Default is about 150 tiles.</p>
<ul>
<li>
<p><code>land_percent %</code><br />
    Percent on whole map; scales with map size </p>
</li>
<li>
<p><code>number_of_tiles N</code><br />
    It's a fixed size</p>
</li>
</ul>
<p><code>number_of_clumps N</code><br />
Maximum number of distinct terrain patches to create. Default is one.</p>
<p><code>set_scale_by_size</code><br />
To be used with number_of_tiles; total terrain size is scaled to map size. Unscaled value refers to a 100x100 map.</p>
<p><code>set_scale_by_groups</code><br />
Number of patches is scaled to map size. Unscaled value refers to a 100x100 map.</p>
<p><code>spacing_to_other_terrain_types N</code><br />
Minimum distance, in tiles, from different types of terrains. Default is none.
Recommended for keeping forests away from shores, otherwise they can obstruct the way. </p>
<ul>
<li>It doesn't force terrains placed later to stay away, only checks terrains placed before; so you better include this attribute for all terrains that must be separated</li>
<li>It also affects the minimum distance, in tiles, from cliffs</li>
</ul>
<p><code>set_avoid_player_start_areas</code><br />
Makes terrain stay away from the center of Player Lands. Without it, forests and lakes may swallow town centers!</p>
<p><code>height_limits N(0-7) N(0-7)</code><br />
Forces terrain to be placed within certain elevations. First number is minimum height, second is maximum.
For example, it lets you place snow only on hill tops.</p>
<p><code>set_flat_terrain_only</code><br />
Avoid elevation changes. Useful to prevent lakes form lying on slopes.
If it doesn't work, try using height_limits 0 0</p>
<p><code>clumping_factor %(-100-99)</code><br />
Shape regularity: higher values tend to form roundish patches, lower values tend to form weird, snaky patches. 
Default is 20 (different than in Land generation). Negative values will create extremely patchy and snaky clumps.</p>
<h3 id="126-connection_generation">1.2.6. &lt;CONNECTION_GENERATION&gt;</h3>
<p>Connections are lines of terrain that link Lands. Usually their job is to ensure that units can walk to other lands.
You can't create single connections, only general systems of connections. If possible, connections reach origins of lands (town centers, if placed with max_distance_to_players 0).</p>
<h4 id="commands_5">Commands</h4>
<p><code>create_connect_all_lands { ... }</code><br />
All Lands are connected. In general this doesn't include isles created with &lt;TERRAIN_GENERATION&gt;.</p>
<p><code>create_connect_all_players_land { ... }</code><br />
All Player Lands are connected. Connections may pass thru nobody's lands too, if that's the easiest way.</p>
<p><code>create_connect_teams_lands { ... }</code><br />
Allied Player Lands are connected. Connections may pass thru enemy and nobody's lands too, if that's the easiest way.</p>
<p><code>create_connect_same_land_zones { ... }</code><br />
Appears to behave the exactly same way as create_connect_all_lands. Previously undocumented and is not therefore not typically used.</p>
<h5 id="attributes_3">Attributes</h5>
<p><code>default_terrain_replacement TYPE</code><br />
Creates connections by replacing ALL intervening terrain with the specified terrain.  Previously undocumented, and therefore not typically used. If used, make sure to use before any replace_terrain attributes. Those replace_terrain attributes can then be used to specify a different terrain for parts of the connection.  For example, to replace all terrain with road, but water with shallows. When used after a replace_terrain attribute it overrides it and re-replaces terrain along the connection.</p>
<p><code>replace_terrain  TYPE  TYPE</code><br />
Defines what base terrain should be replaced by what connection terrain. 
Typically shallow replaces water, by typing <code>replace_terrain WATER SHALLOW</code>
By default, connections CAN pass through not specified terrain; however, they are not visible if you do not have a replace_terrain for a given terrain. If you want to make sure a connection doesn’t pass through a terrain, give that terrain a relatively high terrain_cost.</p>
<ul>
<li>You can replace a terrain with itself.</li>
</ul>
<p><code>terrain_cost TYPE  N(1-15)</code><br />
"Cost" of passing thru that terrain (can be set even if you don’t have a corresponding replace_terrain). Connections are more likely to pass thru terrains with lower cost, and tend to avoid terrains with higher cost (or take shorter ways). Default is 1.</p>
<p><code>terrain_size  TYPE  N  N</code><br />
Connections width on that terrain (requires respective replace_terrain). </p>
<ul>
<li>First number is mean width in tiles</li>
<li>Second number is maximum random variation of connections width in every point</li>
</ul>
<p>E.g. terrain_size WATER 5 2 creates paths 3 to 7 tiles wide (5 ± 2). Default is 1 0. 
Specifying a variance greater or equal to mean width CAN reduce width to 0 (broken connections!).
If a connection looks wider than it should, actually it's two or more parallel connections; try changing terrain cost.</p>
<h3 id="127-objects_generation">1.2.7. &lt;OBJECTS_GENERATION&gt;</h3>
<p>Objects include units, buildings, resources and decorations such as hawks. </p>
<h4 id="commands_6">Commands</h4>
<p><code>create_object TYPE { ... }</code><br />
Creates one or more objects of TYPE, for players or for nature. <br />
WARNING: I experienced crashes and bad results when using more than 99 distinct create_object commands! </p>
<h5 id="attributes_4">Attributes</h5>
<p><code>number_of_objects N</code><br />
How many to place. Default is 1.</p>
<p><code>number_of_groups N</code><br />
Creates N groups, each of specified number_of_objects. Total objects  =  number_of_objects  X  number_of_groups.<br />
Default is no groups: objects are independent and completely scattered.</p>
<p><code>group_variance N</code><br />
Works only with number_of_groups: randomizes number of objects in every group. It changes by a random amount ranging from -N to N (a group of deer with number_of_objects 5 and group_variance 2 can have 3 to 7 deer: 5 ± 2). Default is 0.</p>
<ul>
<li>Each group can have a different amount</li>
<li>Groups always have at least one element</li>
</ul>
<p><code>set_scaling_to_map_size  /  set_scaling_to_player_number</code><br />
Use one or other. Scales number of groups; if number_of_groups isn't defined, scales number_of_objects.</p>
<ul>
<li>set_scaling_to_map_size: unscaled value refers to a 100x100 map</li>
<li>set_scaling_to_player_number: Total groups  =  number_of_groups  X  number of players     </li>
</ul>
<p>(it has only effect on number, don't get confused with set_place_for_every_player)</p>
<p><code>set_place_for_every_player</code><br />
Places objects as "personal" objects for every player, such as the starting villagers. Also works for non-player objects, e.g. everyone can start with a personal gold mine nearby (but set_gaia_object_only is needed).</p>
<ul>
<li>Places objects even if player doesn't have the ability to build them; e.g. you can create a stable also at Dark Age or for Aztecs, though it won't produce any horsemen</li>
<li>Works only if Player Lands are defined</li>
<li>You can't place units on lands that are separated by water from own Player Land (or shallow / ice / beach for buildings and other objects not allowed there)</li>
<li>Usually it doesn't work for water objects, so you CAN'T place starting ships, docks and so on, BUT...<ul>
<li>It works if Player Lands are made of dirt (<code>DIRT</code>, <code>DIRT2</code>, <code>DIRT3</code>, <code>DIRT_SNOW</code>)</li>
<li>It works for computer players</li>
<li>It may work if water is part of the player land itself</li>
<li>It does not work if land_id is used</li>
</ul>
</li>
</ul>
<p>I made a lot of experiments but still I can't find logic in this!!</p>
<p><code>set_gaia_object_only</code><br />
Makes objects belong to NO player. By default, all objects are "gaia" if you don't use <code>set_place_for_every_player</code>.</p>
<ul>
<li>It MUST be used, together with <code>set_place_for_every_player</code>, for personal non-controllable objects.</li>
<li>If used with controllable objects (units and buildings), makes them neutral (rescuable). Rescuable objects permanently join the first human player who passes by, but not computer players. They're west-European style.</li>
</ul>
<p><code>terrain_to_place_on TYPE</code><br />
Only places on this type of terrain. By default, most common objects are automatically placed on reasonable terrains (no fish on land, no relics on water, no gold on road, etc...), and you can't put them on weird terrain anyway.
But some types of eye-candies may be put on weird terrain (you can use terrain_to_place_on to avoid this).</p>
<p><code>min_distance_to_players N,  max_distance_to_players N</code><br />
Minimum and maximum distance, in tiles, from the centers of Player Lands. You can specify one or both attributes.
By default, there are no distance limits. Usually the town center is placed at <code>max_distance_to_players 0</code>.</p>
<ul>
<li>With <code>set_place_for_every_player</code>, distance refers only to respective player</li>
<li>Without <code>set_place_for_every_player</code>, <code>max_distance_to_players</code> has NO effect, and <code>min_distance_to_players</code> ensures a minimum distance from the centers of ALL LANDS. If you have many non-player lands this can restrict the placement of objects.</li>
<li>With <code>place_on_specific_land_id</code>, distance refers to that land's center</li>
<li>If <code>number_of_groups</code> is defined, distance refers to centers of groups.</li>
<li>If these distance limits are very strict (e.g. min = max), objects tend to appear mostly on the left.</li>
</ul>
<p><code>max_distance_to_other_zones N</code><br />
Minimum (NOT maximum!!) distance in tiles from borders of zones; useful to keep objects away from shores.
If <code>number_of_groups</code> is defined, distance refers to centers of groups.</p>
<p><code>min_distance_group_placement N</code><br />
Scatters objects, keeping them at least N tiles away from any other current or future object of any type.
Keeps away only objects created by the same create_object command, or placed later; does not affect objects placed earlier. To be sure that two series of objects aren't close, add this attribute to both creation statements.
If <code>number_of_groups</code> is defined, distance applies among centers of groups, not among objects of same group.
WARNING: This attribute will affect ALL objects placed after this command. If you want to scatter objects created in the same create_object command without restricting future object placement, it is best to use <code>temp_min_distance_group_placement</code> (see blow) to do so. Use <code>min_distance_group_placement</code> with smaller values to prevent objects created in future commands from ending up directly next to the current ones.  Both attributes can be used together in the same <code>create_object</code> command.  Inappropriate use of <code>min_distance_group_placement</code> may result in objects towards the end of your script not being placed at all!</p>
<p><code>temp_min_distance_group_placement N</code><br />
Scatters objects created by current create_object command, keeping them at least N tiles away from each other. Does not apply to objects placed earlier or later. If number_of_groups is defined, distance applies among centers of groups, not among objects of same group. Only used for relics in the standard maps; however is often a good idea to use this attribute for any objects that need to be scattered far apart from each other (like wolves, or extra map resources).</p>
<p><code>group_placement_radius N</code><br />
Force objects in every group to stay within N tiles from center of group. Default is 3 tiles (7x7 square area).</p>
<ul>
<li>group_placement_radius overrides other attributes, including number_of_objects. For large groups, you need a large group_placement_radius; by default, groups can contain no more than 7x7=49 objects</li>
</ul>
<p><code>set_tight_grouping  /  set_loose_grouping</code><br />
Use one or other. Tight groups have no space among objects (like gold and stone in standard maps).<br />
Loose groups can have 1 or 2 tiles among objects; <code>set_loose_grouping</code> is default and can be omitted.</p>
<ul>
<li><code>set_tight_grouping</code> doesn't place objects that are larger than 1 tile and can't overlap (like most buildings)</li>
</ul>
<p><code>place_on_specific_land_id N</code><br />
Places objects only on the Land marked by <code>land_id N</code>.
- Personal objects are assigned to players without needing to use <code>set_place_for_every_player</code> (and won't appear if you do use it)
- Land must be separated from others by water (or shallow / ice / beach for objects not allowed there)
- If there are multiple lands with the same id, the set number of objects is placed on each of them</p>
<p><code>resource_delta -N</code><br />
Modify the resources of a specific instance of an object. (only works with UP, not in the HD Edition)
This allows you to, for example, produce a gold mine with only 300 gold in it.  Does not work in the scenario editor.</p>
<h3 id="128-map-sizes">1.2.8. Map Sizes</h3>
<p>(the values provided in the original RMSG are not correct)<br />
Scaling refers to map area, that is total number of tiles, not side length.
<code>set_scale_by_size</code> and <code>set_scale_by_groups</code> (for terrain and elevation) use a 100x100 = 10000 tiles reference map.
<code>set_scaling_to_map_size</code> (for objects) uses a 100x100 map as a reference. So that is number of objects x area ratio from the table below:</p>
<table>
<thead>
<tr>
<th>Size</th>
<th>Tiles on Sides</th>
<th>Total Tiles</th>
<th>Area ratio to 100x100 map</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tiny</td>
<td>120x120</td>
<td>14400</td>
<td>1.4</td>
</tr>
<tr>
<td>Small</td>
<td>144x144</td>
<td>20736</td>
<td>2.1</td>
</tr>
<tr>
<td>Medium</td>
<td>168x168</td>
<td>28224</td>
<td>2.8</td>
</tr>
<tr>
<td>Large</td>
<td>200x200</td>
<td>40000</td>
<td>4.0</td>
</tr>
<tr>
<td>Huge</td>
<td>220x220</td>
<td>48400</td>
<td>4.8</td>
</tr>
<tr>
<td>Gigantic</td>
<td>240x240</td>
<td>57600</td>
<td>5.8</td>
</tr>
<tr>
<td>LudiKRIS</td>
<td>480x480</td>
<td>230400</td>
<td>23.0</td>
</tr>
</tbody>
</table>
<h2 id="13-general-syntax">1.3 General Syntax</h2>
<p>These structures can be used anywhere in an RMS. Most of them allow a RMS to change at every game.</p>
<h3 id="131-comments">1.3.1. Comments</h3>
<pre><code class="rms">/* This is a comment. It's ignored by the game, but useful to people who read the RMS, especially yourself! */
</code></pre>

<ul>
<li>Comments can span on multiple lines</li>
<li>Comments can be nested</li>
<li>There must be space or new line between the asterisks and the words, otherwise the whole rest of your script may be ignored!</li>
<li>WARNING: there is a bug where comments are NOT ignored, if they are within logical branches of conditionals and random code (see below) that aren't chosen. This may get fixed in future versions of the UserPatch, but it is best to avoid comments within conditionals and random code. Be especially careful about this when creating map packs!</li>
</ul>
<h3 id="132-conditionals">1.3.2. Conditionals</h3>
<pre><code class="rms">if LABEL_1
(...)   /* commands executed only if LABEL_1 is defined */
elseif LABEL_2  
(...)   /* commands executed only if LABEL_2 is defined */    
elseif LABEL_3  
(...)   /* commands executed only if LABEL_3 is defined */ 
else
(...)   /* commands executed only if none of the previous labels is defined */  
endif
</code></pre>

<p>Commands following an <code>if</code> statement (until next <code>elseif</code>/<code>else</code>/<code>endif</code>) are executed ONLY if respective <code>LABEL</code> is true.
E.g. Kings should be created only if game mode is Regicide.</p>
<ul>
<li><code>elseif</code>s and <code>else</code> are optional:<ul>
<li><code>elseif</code> checks another condition, if previously checked conditions fail</li>
<li><code>else</code> executes by default if none of the other conditions apply</li>
</ul>
</li>
<li>An if structure can control whole commands, but can also be used inside any { } brackets, to control attributes</li>
<li>Whole if structures can be nested</li>
<li>A "NOT" can be implemented this way:</li>
</ul>
<pre><code class="rms">if LABEL
else
(...)   /* this code is executed if LABEL is NOT true! */
endif
</code></pre>

<p>Here are the possible condition labels defined by the game.</p>
<ul>
<li>Game type:<ul>
<li><code>REGICIDE</code></li>
<li><code>DEATH_MATCH</code></li>
</ul>
</li>
<li>Map dimension:<ul>
<li><code>TINY_MAP</code></li>
<li><code>SMALL_MAP</code></li>
<li><code>MEDIUM_MAP</code></li>
<li><code>LARGE_MAP</code></li>
<li><code>HUGE_MAP</code></li>
<li><code>GIGANTIC_MAP</code></li>
<li><code>LUDIKRIS_MAP</code></li>
</ul>
</li>
<li>Starting resources:<ul>
<li><code>HIGH_RESOURCES</code></li>
<li><code>MEDIUM_RESOURCES</code></li>
<li><code>LOW_RESOURCES</code></li>
<li><code>DEFAULT_RESOURCES</code></li>
</ul>
</li>
<li>Player positioning:<ul>
<li><code>FIXED_POSITIONS</code>: defined if the "Team Together" box is checked</li>
</ul>
</li>
<li>UP-only Definitions:<ul>
<li><code>RANDOM_MAP</code>: defined for Random Map games</li>
<li><code>TURBO_RANDOM_MAP</code> defined for Turbo Random Map games</li>
<li><code>KING_OT_HILL</code>: defined for King of the Hill games</li>
<li><code>WONDER_RACE</code>: defined for Wonder Race games</li>
<li><code>DEFEND_WONDER</code>: defined for Defend the Wonder games</li>
<li><code>CAPTURE_RELICS</code>: defined for the Relics victory condition</li>
<li><code>[1-8]_PLAYER_GAME</code>: defined as the total number of players (2_PLAYER_GAME, etc.)</li>
<li><code>UP_AVAILABLE</code>: defined for v1.4 and later; used to detect the patch</li>
</ul>
</li>
<li>HD-only Definitions:<ul>
<li><code>CAPTURE_THE_RELIC</code>: defined for the new "capture the relic" mode</li>
</ul>
</li>
</ul>
<p>In addition, it is possible to use any of the Item Constants in conditionals. They will always be true if that constant is available in the game.  This can be used to implement conditional checks for mods or game versions. For example:</p>
<pre><code class="rms">if BEGUINE /* this is a pre-defined constant in the Age of Chivalry mod */
create_object JAGUAR /* creates a Jaguar when you are using Age of Chivalry */
else
create_object WOLF /* otherwise creates a wolf */
endif
</code></pre>

<p>This technique CAN be used to distinguish between the basegame in the HD Edition and the DLC expansions, by checking for a predefined name from Rise of the Rajas only (not AoF or AK); for example:</p>
<pre><code class="rms">if DLC_MANGROVEFOREST #define DLC_AVAILABLE endif
</code></pre>

<pre><code class="rms">#define LABEL
</code></pre>

<p>Defines whatever label you want, to be used as an if condition. It will evaluate as true.</p>
<ul>
<li>Condition names can contain ANY character ("$%&amp;òà" is a valid condition!!)</li>
<li>Be careful when choosing a name that is already defined as a constant.  For example <code>#define DESERT</code> caused me problems; probably because <code>DESERT</code> is a preexisting terrain name.</li>
</ul>
<h3 id="133-random-code">1.3.3. Random Code</h3>
<pre><code class="rms">start_random
percent_chance %
(...)
percent_chance % 
(...)
end_random
</code></pre>

<p>Blocks of code following each percent_chance instruction have that percent probability at each game to be executed.
If percents don't add up to 100, the remaining percent is the chance that nothing happens.</p>
<ul>
<li>Random structures can control whole commands, but can also be used inside { } brackets, to control attributes</li>
<li>Whole random structures can be nested</li>
<li>You cannot use decimals (percent_chance 12.5 is NOT valid)</li>
</ul>
<p>Example:</p>
<pre><code class="rms">start_random
  percent_chance 30
      #define ARABIAN_MAP      /* map will be Arabian in 30% of games */
  percent_chance 20
      #define NORTHERN_MAP     /* map will be northern in 20% of games */
end_random                     /* map will be default (e.g. temperate) in remaining 50% of games */
</code></pre>

<h2 id="14-item-constants">1.4. Item Constants</h2>
<p><code>#const   NAME   N</code><br />
Creates a constant name for a terrain or object type, suitable for commands such as create_terrain. 
Items are identified by a number inside the game, but by a name (such as <code>GRASS</code>) in a RMS; this command ties a practical name to an item number. Numbers are reported in Terrains &amp; Objects chapter.</p>
<ul>
<li>Constant names can contain ANY character ("$%&amp;kòà" is a valid name!!)</li>
<li>Every item can have many names; original names remain valid</li>
<li>You can't redefine an existing name to a different number</li>
</ul>
<p>Many items already have a predefined name, but <code>#const</code> can be very useful because: </p>
<ul>
<li>Some items, e.g. snowy road, don't have a predefined name</li>
<li>You may want an alias for your convenience, e.g. in your language</li>
<li>You can define variable items with a single if structure, instead of checking every time an item is used. </li>
</ul>
<p>In this example you would use only <code>GROUND</code> and <code>TREE</code> from now on:</p>
<pre><code class="rms">If ARABIAN_MAP
    #const GROUND 14    /* desert */
    #const TREE 351 /* palm */
elseif NORTHERN_MAP
    #const GROUND 32    /* snow */
    #const TREE 413 /* snowy pine */
else
    #const GROUND 0 /* grass */
    #const TREE 411 /* oak */
endif

#const works only for terrain and object identifiers, not generic numbers. You CAN'T do this:
#const NUM 10
(...)
number_of_objects NUM
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../2_terrains_and_objects/" class="btn btn-neutral float-right" title="2. Terrains & Objects">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href=".." class="btn btn-neutral" title="0. Introduction"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href=".." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../2_terrains_and_objects/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../highlight.js" defer></script>
      <script src="../highlight.js-rms.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
